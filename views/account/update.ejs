<section class="account-update-section">
  <h1><%= title %></h1>
  <%- messages() %>
  
  <% if (errors) { %>
    <ul class="notice">
      <% errors.array().forEach(error => { %>
        <li><%= error.msg %></li>
      <%  }) %>
    </ul>
  <% } %>
  
  <!-- Account Update Form -->
  <div class="form-container">
    <h2>Account Update</h2>
    <form id="accountUpdateForm" action="/account/update-account" method="post">
      <div class="form-group">
        <label for="account_firstname">First Name</label>
        <input 
          type="text" 
          id="account_firstname" 
          name="account_firstname" 
          required 
          autocomplete="given-name"
          value="<%= locals.account_firstname %>"
        >
      </div>
      
      <div class="form-group">
        <label for="account_lastname">Last Name</label>
        <input 
          type="text" 
          id="account_lastname" 
          name="account_lastname" 
          required 
          autocomplete="family-name"
          value="<%= locals.account_lastname %>"
        >
      </div>
      
      <div class="form-group">
        <label for="account_email">Email Address</label>
        <input 
          type="email" 
          id="account_email" 
          name="account_email" 
          required 
          autocomplete="email"
          value="<%= locals.account_email %>"
        >
      </div>
      
      <input type="hidden" name="account_id" value="<%= locals.account_id %>">
      <button type="submit" class="btn">Update Account</button>
    </form>
  </div>
  
  <!-- Change Password Form -->
  <div class="form-container">
    <h2>Change Password</h2>
    <form id="changePasswordForm" action="/account/update-password" method="post">
      <div class="form-group">
        <label for="account_password">New Password</label>
        <div class="password-container">
          <input 
            type="password" 
            id="account_password" 
            name="account_password" 
            required 
            autocomplete="new-password"
            minlength="12"
            pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{12,}$"
          >
          <button type="button" class="password-toggle" onclick="togglePassword()">
            <span class="toggle-icon">üëÅÔ∏è</span>
          </button>
        </div>
        <div class="password-requirements">
          <p><strong>Password Requirements:</strong></p>
          <ul>
            <li>Minimum 12 characters in length</li>
            <li>At least 1 capital letter</li>
            <li>At least 1 number</li>
            <li>At least 1 special character</li>
          </ul>
          <p><em>Note: Entering a new password will replace your current password.</em></p>
        </div>
      </div>
      
      <input type="hidden" name="account_id" value="<%= locals.account_id %>">
      <button type="submit" class="btn">Change Password</button>
    </form>
  </div>
  
  <div class="management-link">
    <a href="/account/">Back to Account Management</a>
  </div>
</section>

<script>
function togglePassword() {
  const passwordInput = document.getElementById('account_password');
  const toggleIcon = document.querySelector('.toggle-icon');
  
  if (passwordInput.type === 'password') {
    passwordInput.type = 'text';
    toggleIcon.textContent = 'üôà';
  } else {
    passwordInput.type = 'password';
    toggleIcon.textContent = 'ÔøΩÔøΩÔ∏è';
  }
}
</script> 