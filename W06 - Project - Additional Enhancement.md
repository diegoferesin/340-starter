## Enhancement: Saved Vehicles (Favorites)

### Summary
Adds a Saved Vehicles (Favorites) feature so logged-in clients can save vehicles and later manage their list. The enhancement includes database, model, controller, routes, and views, following MVC best practices with prepared statements, validation, and error handling.

### Database Update
Created a new table `public.account_favorites` with proper foreign keys and a uniqueness constraint:

```sql
CREATE TABLE IF NOT EXISTS public.account_favorites (
  favorite_id INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  account_id INT NOT NULL REFERENCES public.account(account_id) ON DELETE CASCADE,
  inv_id INT NOT NULL REFERENCES public.inventory(inv_id) ON DELETE CASCADE,
  created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
  CONSTRAINT account_favorites_unique UNIQUE (account_id, inv_id)
);

CREATE INDEX IF NOT EXISTS idx_account_favorites_account_id ON public.account_favorites(account_id);
CREATE INDEX IF NOT EXISTS idx_account_favorites_inv_id ON public.account_favorites(inv_id);
```

These statements were added to `database/rebuild.sql`.

### Model
New model functions (in a new or existing model file) to manage favorites:
- `addFavorite(accountId, invId)`
- `removeFavorite(accountId, invId)`
- `listFavoritesByAccount(accountId)`

All queries use parameterized SQL and return structured results or throw errors handled by controllers.

### Controller
New controller actions:
- `GET /account/favorites` → List a user’s saved vehicles
- `POST /favorites/:inv_id` → Save a vehicle
- `POST /favorites/:inv_id/delete` → Remove a saved vehicle

Each action validates inputs, checks login status, flashes user-friendly messages, and handles errors via the shared error handler.

### Routes
Added protected routes (behind `utilities.checkLogin`) to handle listing, adding, and removing favorites. Classification and detail routes remain public.

### Views
- New view `views/account/favorites.ejs` renders the user’s saved vehicles with links to vehicle detail pages and a remove button for each item.
- Vehicle detail view includes a “Save to Favorites” button for logged-in users.

### Navigation
- From a vehicle detail page, click “Save to Favorites” when logged in.
- From Account Management, a link “Favorites” opens the list of saved vehicles.

### Best Practices
- All SQL uses prepared statements.
- Server-side validation on IDs and login status.
- Errors wrapped with `utilities.handleErrors` and surfaced with friendly flash messages.

### How to Access
1. Start the server and log in.
2. Visit a vehicle detail page and click “Save to Favorites”.
3. Go to Account Management → “Favorites” to view/remove saved vehicles.

### Files Added / Updated
- `database/rebuild.sql`: created `public.account_favorites` table and indexes
- `models/favorites-model.js`: add/remove/list favorites model functions
- `controllers/favoritesController.js`: list/add/remove favorites handlers
- `routes/accountRoute.js`: routes for favorites (list/add/remove)
- `controllers/invController.js`: passes `inv_id` to detail view render data
- `views/inventory/detail.ejs`: shows “Save to Favorites” for logged-in users
- `views/account/favorites.ejs`: lists saved vehicles

### Endpoints
- GET `/account/favorites` (auth required): list saved vehicles
- POST `/account/favorites/:inv_id` (auth required): save vehicle
- POST `/account/favorites/:inv_id/delete` (auth required): remove saved vehicle

### Testing Steps
1. Apply DB changes (run the app using the updated `rebuild.sql` or execute the CREATE TABLE statements).
2. Log in as any account.
3. Open a vehicle detail page and click “Save to Favorites”.
4. Visit `/account/favorites` to verify the saved item appears; remove it to test deletion.
